PS C:\Users\Jeferson\Documents\orbis> & C:/Users/Jeferson/Documents/orbis/venv/Scripts/Activate.ps1
(venv) PS C:\Users\Jeferson\Documents\orbis> uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload
>> 
INFO:     Will watch for changes in these directories: ['C:\\Users\\Jeferson\\Documents\\orbis']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [14384] using WatchFiles
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\transformers\utils\generic.py:441: FutureWarning: `torch.utils._pytree._register_pytree_node` is deprecated. Please use `torch.utils._pytree.register_pytree_node` instead.
  _torch_pytree._register_pytree_node(
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\transformers\utils\generic.py:309: FutureWarning: `torch.utils._pytree._register_pytree_node` is deprecated. Please use `torch.utils._pytree.register_pytree_node` instead.
  _torch_pytree._register_pytree_node(
INFO:     Started server process [8344]
INFO:     Waiting for application startup.
2025-12-16 15:46:34,285 - backend.main - INFO - üöÄ Starting Orbis Backend v2.0...
2025-12-16 15:46:35,880 - backend.main - INFO - ‚úÖ Database tables created/verified
2025-12-16 15:46:35,880 - backend.main - INFO - ‚úÖ Storage directories created/verified
2025-12-16 15:46:35,915 - backend.core.cache - WARNING - ‚ö†Ô∏è  Redis connection failed: Error 11001 connecting to living-liger-41000.upstash.io:6379. getaddrinfo  failed.
2025-12-16 15:46:35,915 - backend.core.cache - WARNING - ‚ö†Ô∏è  Sistema funcionar√° com cache in-memory (limitado)
2025-12-16 15:46:35,915 - backend.core.cache - WARNING - ‚ö†Ô∏è  Para melhor performance, inicie Redis:
2025-12-16 15:46:35,915 - backend.core.cache - WARNING -    ‚Ä¢ Docker: docker-compose up -d
2025-12-16 15:46:35,917 - backend.core.cache - WARNING -    ‚Ä¢ Windows: .\install_redis_windows.ps1
2025-12-16 15:46:35,917 - backend.main - INFO - ‚úÖ Redis connected
2025-12-16 15:46:35,917 - backend.main - INFO - üîç Initializing Lazy Loading System...
2025-12-16 15:46:35,917 - backend.services.hardware_detection - INFO - üîç Detecting hardware capabilities...
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - ============================================================
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - üîç HARDWARE DETECTION RESULTS
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - ============================================================
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - üíª CPU: 12 cores @ 2688 MHz
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - üß† RAM: 1.8GB available / 7.8GB total (76.7% used)
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - üéÆ GPU: Not available (using CPU)
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - üìä Profile: LOW
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO -
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - üéØ RECOMMENDED CONFIGURATION:
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO -    ‚Ä¢ Whisper Model: base
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO -    ‚Ä¢ NLLB Model: facebook/nllb-200-distilled-600M
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO -    ‚Ä¢ Device: CPU
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO -    ‚Ä¢ Compute Type: int8
2025-12-16 15:46:36,025 - backend.services.hardware_detection - INFO - ============================================================
2025-12-16 15:46:36,025 - backend.main - INFO - ‚úÖ Hardware auto-configuration applied:
2025-12-16 15:46:36,025 - backend.main - INFO -    Device: cpu
2025-12-16 15:46:36,025 - backend.main - INFO -    Whisper: base
2025-12-16 15:46:36,025 - backend.main - INFO -    NLLB: facebook/nllb-200-distilled-600M
2025-12-16 15:46:36,025 - backend.services.lazy_loader - INFO - üìù Registered whisper for lazy loading
2025-12-16 15:46:36,025 - backend.main - INFO - üìù Registered Whisper for lazy loading
2025-12-16 15:46:36,025 - backend.services.lazy_loader - INFO - üìù Registered nllb for lazy loading
2025-12-16 15:46:36,025 - backend.main - INFO - üìù Registered NLLB for lazy loading
2025-12-16 15:46:36,025 - backend.services.lazy_loader - INFO - üìù Registered coqui for lazy loading
2025-12-16 15:46:36,025 - backend.main - INFO - üìù Registered Coqui TTS for lazy loading
2025-12-16 15:46:36,025 - backend.services.lazy_loader - INFO - üîÑ Started auto-unload task (check every 300s, timeout: 3600s)
2025-12-16 15:46:36,025 - backend.main - INFO - ‚úÖ Auto-unload enabled (idle: 3600s)
2025-12-16 15:46:36,025 - backend.main - INFO - ‚úÖ Lazy loading enabled - models will load on first use
2025-12-16 15:46:36,025 - backend.main - INFO - üì¶ Pre-loading critical models to avoid runtime crashes...
2025-12-16 15:46:36,025 - backend.services.lazy_loader - INFO - ‚è≥ Loading whisper model...
2025-12-16 15:46:36,025 - backend.services.lazy_loader - INFO - ‚è≥ Loading nllb model...
2025-12-16 15:46:36,025 - backend.services.lazy_loader - INFO - ‚è≥ Loading coqui model...
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\huggingface_hub\file_download.py:942: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
  warnings.warn(
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\ctranslate2\__init__.py:8: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  import pkg_resources
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\huggingface_hub\file_download.py:942: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
  warnings.warn(
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\transformers\modeling_utils.py:484: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(checkpoint_file, map_location=map_location)
2025-12-16 15:46:38,402 - ml.asr.whisper_service - INFO - ‚úÖ Whisper base loaded in 1.26s
2025-12-16 15:46:38,402 - ml.asr.whisper_service - INFO - üî• Warming up Whisper model...
2025-12-16 15:46:41,598 - ml.asr.whisper_service - INFO - ‚úÖ Model warmed up
2025-12-16 15:46:41,600 - backend.services.lazy_loader - INFO - ‚úÖ whisper loaded successfully (time: 5.6s, RAM: +1312MB)
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\transformers\utils\generic.py:309: FutureWarning: `torch.utils._pytree._register_pytree_node` is deprecated. Please use `torch.utils._pytree.register_pytree_node` instead.
  _torch_pytree._register_pytree_node(
2025-12-16 15:47:01,336 - ml.tts.coqui_service - INFO - ‚úÖ Registered XTTS safe globals for deserialization: XttsConfig, XttsAudioConfig, XttsArgs, BaseDatasetConfig
 > tts_models/multilingual/multi-dataset/xtts_v2 is already downloaded.
 > Using model: xtts
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\huggingface_hub\file_download.py:942: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
  warnings.warn(
2025-12-16 15:47:42,544 - ml.mt.nllb_service - INFO - ‚úÖ NLLB model loaded successfully
2025-12-16 15:47:42,574 - backend.services.lazy_loader - INFO - ‚úÖ nllb loaded successfully (time: 66.5s, RAM: +3182MB)
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\TTS\tts\layers\xtts\xtts_manager.py:5: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  self.speakers = torch.load(speaker_file_path)
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\TTS\utils\io.py:54: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(f, map_location=map_location, **kwargs)
2025-12-16 15:47:59,299 - ml.tts.coqui_service - INFO - ‚úÖ Coqui TTS model loaded successfully
2025-12-16 15:47:59,350 - backend.services.lazy_loader - INFO - ‚úÖ coqui loaded successfully (time: 83.3s, RAM: +3219MB)
2025-12-16 15:47:59,364 - backend.main - INFO - ‚úÖ All critical models pre-loaded successfully
2025-12-16 15:47:59,367 - backend.main - INFO - üöÄ Initializing advanced services...
2025-12-16 15:47:59,440 - backend.core.enterprise_features - WARNING - ‚ö†Ô∏è Enterprise service Redis connection failed: Error 11001 connecting to living-liger-410000.upstash.io:6379. getaddrinfo failed.
2025-12-16 15:47:59,440 - backend.main - INFO - ‚úÖ Enterprise service initialized
2025-12-16 15:47:59,440 - backend.services.advanced_voice_cloning - INFO - ‚úÖ TTS model loaded for quality: fast
2025-12-16 15:47:59,440 - backend.services.advanced_voice_cloning - INFO - ‚úÖ TTS model loaded for quality: balanced
2025-12-16 15:47:59,440 - backend.services.advanced_voice_cloning - INFO - ‚úÖ TTS model loaded for quality: high
2025-12-16 15:47:59,440 - backend.services.advanced_voice_cloning - INFO - ‚úÖ TTS model loaded for quality: ultra
2025-12-16 15:47:59,440 - backend.services.advanced_voice_cloning - INFO - ‚úÖ Advanced Voice Cloning Service initialized
2025-12-16 15:47:59,440 - backend.main - INFO - ‚úÖ Advanced voice cloning service initialized
2025-12-16 15:47:59,451 - backend.services.ultra_low_latency_webrtc - ERROR - ‚ùå Failed to initialize Ultra-Low Latency WebRTC Service: Error 11001 connecting to living-liger-41000.upstash.io:6379. getaddrinfo failed.
2025-12-16 15:47:59,451 - backend.main - INFO - ‚úÖ Ultra-low latency WebRTC service initialized
2025-12-16 15:47:59,452 - backend.services.ai_meeting_assistant - WARNING - ‚ö†Ô∏è OpenAI API key not configured - AI features disabled
2025-12-16 15:47:59,453 - backend.main - INFO - ‚úÖ AI meeting assistant initialized
2025-12-16 15:47:59,456 - backend.services.voice_marketplace - WARNING - ‚ö†Ô∏è Voice Marketplace Redis connection failed: Error 11001 connecting to living-liger-411000.upstash.io:6379. getaddrinfo failed.
2025-12-16 15:47:59,457 - backend.main - INFO - ‚úÖ Voice marketplace service initialized
2025-12-16 15:47:59,459 - backend.services.advanced_analytics - ERROR - ‚ùå Failed to initialize Advanced Analytics Service: Error 11001 connecting to living-liger-41000.upstash.io:6379. getaddrinfo failed.
2025-12-16 15:47:59,460 - backend.main - INFO - ‚úÖ Advanced analytics service initialized
2025-12-16 15:47:59,462 - backend.services.gamification_system - ERROR - ‚ùå Failed to initialize Gamification System: Error 11001 connecting to living-liger-41000.upstash.io:6379. getaddrinfo failed.
2025-12-16 15:47:59,463 - backend.main - INFO - ‚úÖ Gamification system initialized
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\transformers\modeling_utils.py:484: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  return torch.load(checkpoint_file, map_location=map_location)
C:\Users\Jeferson\Documents\orbis\venv\lib\site-packages\transformers\pipelines\text_classification.py:105: UserWarning: `return_all_scores` is now deprecated,  if want a similar functionality use `top_k=None` instead of `return_all_scores=True` or `top_k=1` instead of `return_all_scores=False`.
  warnings.warn(
Some weights of the model checkpoint at cardiffnlp/twitter-roberta-base-sentiment-latest were not used when initializing RobertaForSequenceClassification: ['roberta.pooler.dense.bias', 'roberta.pooler.dense.weight']
- This IS expected if you are initializing RobertaForSequenceClassification from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing RobertaForSequenceClassification from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
Some weights of GPT2ForSequenceClassification were not initialized from the model checkpoint at microsoft/DialoGPT-medium and are newly initialized: ['score.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
2025-12-16 15:48:08,217 - backend.services.advanced_ai_features - INFO - ‚úÖ Advanced AI Features Service initialized
2025-12-16 15:48:08,226 - backend.main - INFO - ‚úÖ Advanced AI features service initialized
2025-12-16 15:48:08,347 - backend.services.social_networking - ERROR - ‚ùå Failed to initialize Social Networking Service: Error 11001 connecting to living-liger-41000.upstash.io:6379. getaddrinfo failed.
2025-12-16 15:48:08,347 - backend.main - INFO - ‚úÖ Social networking service initialized
2025-12-16 15:48:08,347 - backend.main - INFO - üéØ All advanced services initialized successfully!
2025-12-16 15:48:08,347 - backend.main - INFO - üåç Environment: development
2025-12-16 15:48:08,347 - backend.main - INFO - üîß Debug mode: False
2025-12-16 15:48:08,347 - backend.main - INFO - üéØ Target latency: <800ms
2025-12-16 15:48:08,347 - backend.main - INFO - üîê Security features enabled: False
2025-12-16 15:48:08,347 - backend.main - INFO - üìä Metrics enabled: False
2025-12-16 15:48:08,347 - backend.main - INFO - ‚ú® Orbis Backend ready!
INFO:     Application startup complete.
INFO:     2a09:bac5:633:305a::4d1:35:0 - "OPTIONS /api/voices/profile HTTP/1.1" 200 OK
2025-12-16 15:48:45,358 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:48:45,359 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:48:45,361 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:48:45,438 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: e10438f8-4759-4467-95f4-a12d7c15ae6d, type: access, exp: 1766431806
2025-12-16 15:48:45,788 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices4@gmail.com
INFO:     2a09:bac5:633:305a::4d1:35:0 - "GET /api/voices/profile HTTP/1.1" 200 OK
INFO:     2a09:bac5:633:305a::4d1:35:0 - "OPTIONS /api/voices/preload HTTP/1.1" 200 OK
2025-12-16 15:48:47,070 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:48:47,070 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:48:47,070 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:48:47,070 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: e10438f8-4759-4467-95f4-a12d7c15ae6d, type: access, exp: 1766431806
2025-12-16 15:48:47,248 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices4@gmail.com
2025-12-16 15:48:47,250 - backend.api.voices - INFO - üé§ Preloading voice for user e10438f8-4759-4467-95f4-a12d7c15ae6d
2025-12-16 15:48:47,250 - backend.api.voices - INFO - üìÅ Voice WAV: data\voices\e10438f8-4759-4467-95f4-a12d7c15ae6d.wav
2025-12-16 15:48:47,250 - backend.api.voices - INFO - üìÅ Voice JSON: data\voices\e10438f8-4759-4467-95f4-a12d7c15ae6d.json
2025-12-16 15:48:47,311 - backend.api.voices - INFO - ‚úÖ Voice profile already ready: data\voices\47f91b11-35f4-4c20-89d6-225f2e432fd3.json
2025-12-16 15:48:47,312 - backend.api.voices - INFO - üìä Voice WAV file: 136809 bytes
2025-12-16 15:48:47,313 - backend.api.voices - INFO - üìä Voice profile metadata: Coqui XTTS v2 voice profile - works with short audio samples (5+ seconds)      
2025-12-16 15:48:47,317 - backend.api.voices - INFO - ‚úÖ Speaker WAV verified: C:\Users\Jeferson\Documents\orbis\data\voices\e10438f8-4759-4467-95f4-a12d7c15ae6d.wav
2025-12-16 15:48:47,320 - backend.api.voices - WARNING - ‚ö†Ô∏è Redis cache warning: No module named 'backend.core.redis'
INFO:     2a09:bac5:633:305a::4d1:35:0 - "POST /api/voices/preload HTTP/1.1" 200 OK
INFO:     2a09:bac5:633:305a::4d1:35:0 - "OPTIONS /api/rooms HTTP/1.1" 200 OK
2025-12-16 15:48:50,386 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:48:50,387 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:48:50,387 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:48:50,387 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: e10438f8-4759-4467-95f4-a12d7c15ae6d, type: access, exp: 1766431806
2025-12-16 15:48:50,483 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices4@gmail.com
INFO:     2a09:bac5:633:305a::4d1:35:0 - "POST /api/rooms HTTP/1.1" 201 Created
INFO:     2a09:bac5:633:305a::4d1:35:0 - "OPTIONS /api/rooms/342b5c34-f807-4a35-82ed-fd7bdb6d574c/join HTTP/1.1" 200 OK
2025-12-16 15:48:51,325 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:48:51,325 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:48:51,325 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:48:51,325 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: e10438f8-4759-4467-95f4-a12d7c15ae6d, type: access, exp: 1766431806
2025-12-16 15:48:51,417 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices4@gmail.com
INFO:     2a09:bac5:633:305a::4d1:35:0 - "POST /api/rooms/342b5c34-f807-4a35-82ed-fd7bdb6d574c/join HTTP/1.1" 200 OK
INFO:     2a09:bac5:633:305a::4d1:35:0 - "OPTIONS /api/chat/messages/342b5c34-f807-4a35-82ed-fd7bdb6d574c?limit=100 HTTP/1.1" 200 OK
INFO:     2a09:bac5:633:305a::4d1:35:0 - "OPTIONS /api/profile/me HTTP/1.1" 200 OK
2025-12-16 15:48:51,870 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:48:51,870 - backend.api.deps - INFO - üé´ Token length: 187
INFO:     2a09:bac5:633:305a::4d1:35:0 - "OPTIONS /api/rooms/342b5c34-f807-4a35-82ed-fd7bdb6d574c HTTP/1.1" 200 OK
2025-12-16 15:48:51,870 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:48:51,874 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: e10438f8-4759-4467-95f4-a12d7c15ae6d, type: access, exp: 1766431806
INFO:     ('2a09:bac5:633:305a::4d1:35', 0) - "WebSocket /api/chat/ws/342b5c34-f807-4a35-82ed-fd7bdb6d574c" [accepted]
2025-12-16 15:48:51,916 - backend.api.chat - INFO - Client connected to room 342b5c34-f807-4a35-82ed-fd7bdb6d574c. Total: 1
INFO:     connection open
2025-12-16 15:48:51,953 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:48:51,954 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:48:51,954 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:48:51,955 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: e10438f8-4759-4467-95f4-a12d7c15ae6d, type: access, exp: 1766431806
2025-12-16 15:48:51,983 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:48:51,985 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:48:51,986 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:48:51,987 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: e10438f8-4759-4467-95f4-a12d7c15ae6d, type: access, exp: 1766431806
2025-12-16 15:48:52,047 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices4@gmail.com
INFO:     2a09:bac5:633:305a::4d1:35:0 - "GET /api/voices/profile HTTP/1.1" 200 OK
INFO:     2a09:bac5:633:305a::4d1:35:0 - "GET /api/profile/me HTTP/1.1" 200 OK
INFO:     2a09:bac5:633:305a::4d1:35:0 - "GET /api/chat/messages/342b5c34-f807-4a35-82ed-fd7bdb6d574c?limit=100 HTTP/1.1" 200 OK
INFO:     2a09:bac5:633:305a::4d1:35:0 - "GET /api/rooms/342b5c34-f807-4a35-82ed-fd7bdb6d574c HTTP/1.1" 200 OK
2025-12-16 15:48:52,872 - backend.api.websocket - INFO - üîå WebSocket connection attempt to room: 342b5c34-f807-4a35-82ed-fd7bdb6d574c
2025-12-16 15:48:52,874 - backend.api.websocket - INFO - Query params: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJlMTA0MzhmOC00NzU5LTQ0NjctOTVmNC1hMTJkN2MxNWFlNmQiLCJleHAiOjE3NjY0MzE4MDYsInR5cGUiOiJhY2Nlc3MifQ.lnNSluBMCU6XAZl6Y3uU3GcazGzwaiWRdcrDhapUZk8
2025-12-16 15:48:52,874 - backend.api.websocket - INFO - Headers: {'host': 'convolutionary-staminal-caren.ngrok-free.dev', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 'accept-encoding': 'gzip, deflate, br, zstd', 'accept-language': 'en-US,en;q=0.9,pt-BR;q=0.8,pt;q=0.7', 'cache-control': 'no-cache', 'connection': 'Upgrade', 'origin': 'https://orbis-omega.vercel.app', 'pragma': 'no-cache', 'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits', 'sec-websocket-key': 'ceb9HvQWwLM1z5RHmArO5w==', 'sec-websocket-version': '13', 'upgrade': 'websocket', 'x-forwarded-for': '2a09:bac5:633:305a::4d1:35', 'x-forwarded-host': 'convolutionary-staminal-caren.ngrok-free.dev', 'x-forwarded-proto': 'https'}
2025-12-16 15:48:52,875 - backend.api.websocket - INFO - Origin: https://orbis-omega.vercel.app
2025-12-16 15:48:52,875 - backend.api.websocket - INFO - üìç WebSocket connection from origin: https://orbis-omega.vercel.app
INFO:     ('2a09:bac5:633:305a::4d1:35', 0) - "WebSocket /api/ws/audio/342b5c34-f807-4a35-82ed-fd7bdb6d574c?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJlMTA0MzhmOC00NzU5LTQ0NjctOTVmNC1hMTJkN2MxNWFlNmQiLCJleHAiOjE3NjY0MzE4MDYsInR5cGUiOiJhY2Nlc3MifQ.lnNSluBMCU6XAZl6Y3uU3GcazGzwaiWRdcrDhapUZk8" [accepted]       
2025-12-16 15:48:52,877 - backend.api.websocket - INFO - ‚úÖ WebSocket connection accepted
2025-12-16 15:48:52,877 - backend.api.websocket - INFO - üîê Attempting to authenticate WebSocket user...
2025-12-16 15:48:52,879 - backend.api.deps - INFO - üîë Token from query params: Present
2025-12-16 15:48:52,879 - backend.api.deps - INFO - üîì Decoding token (length: 187)
2025-12-16 15:48:52,879 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:48:52,880 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: e10438f8-4759-4467-95f4-a12d7c15ae6d, type: access, exp: 1766431806
2025-12-16 15:48:52,880 - backend.api.deps - INFO - ‚úÖ Token decoded successfully: {'sub': 'e10438f8-4759-4467-95f4-a12d7c15ae6d', 'exp': 1766431806, 'type': 'access'}
2025-12-16 15:48:52,880 - backend.api.deps - INFO - üë§ User ID from token: e10438f8-4759-4467-95f4-a12d7c15ae6d
2025-12-16 15:48:52,880 - backend.api.deps - INFO - ‚úÖ Converted user_id to UUID: e10438f8-4759-4467-95f4-a12d7c15ae6d
2025-12-16 15:48:52,976 - backend.api.deps - INFO - ‚úÖ User found in database: jefersonservices4@gmail.com
2025-12-16 15:48:53,008 - backend.api.websocket - INFO - ‚úÖ User authenticated: e10438f8-4759-4467-95f4-a12d7c15ae6d
2025-12-16 15:48:53,011 - backend.api.websocket - INFO - User e10438f8-4759-4467-95f4-a12d7c15ae6d connected to room 342b5c34-f807-4a35-82ed-fd7bdb6d574c
INFO:     connection open
2025-12-16 15:48:53,315 - backend.api.websocket - INFO - üåê Loaded user languages from DB: speaks=en (['en']), wants_to_hear=en (['en'])
2025-12-16 15:48:53,346 - backend.services.audio_pipeline.stream_processor - INFO - Started audio processing for user e10438f8-4759-4467-95f4-a12d7c15ae6d (en‚Üíen)
2025-12-16 15:48:53,350 - backend.services.audio_pipeline.stream_processor - INFO - üîÑ Updated languages for user e10438f8-4759-4467-95f4-a12d7c15ae6d: speaks=en, wants_to_hear=en
2025-12-16 15:48:53,352 - backend.api.websocket - INFO - ‚úÖ Initial language settings for user e10438f8-4759-4467-95f4-a12d7c15ae6d: speaks=en, wants_to_hear=en
INFO:     45.178.146.74:0 - "OPTIONS /api/voices/profile HTTP/1.1" 200 OK
2025-12-16 15:49:29,822 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:49:29,823 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:49:29,823 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:49:29,824 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: 702de09d-3da9-4f47-8fde-73a42fdd0457, type: access, exp: 1766080059
2025-12-16 15:49:30,004 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices6@gmail.com
INFO:     45.178.146.74:0 - "GET /api/voices/profile HTTP/1.1" 200 OK
INFO:     45.178.146.74:0 - "OPTIONS /api/voices/preload HTTP/1.1" 200 OK
2025-12-16 15:49:31,532 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:49:31,534 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:49:31,534 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:49:31,535 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: 702de09d-3da9-4f47-8fde-73a42fdd0457, type: access, exp: 1766080059
2025-12-16 15:49:31,668 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices6@gmail.com
2025-12-16 15:49:31,671 - backend.api.voices - INFO - üé§ Preloading voice for user 702de09d-3da9-4f47-8fde-73a42fdd0457
2025-12-16 15:49:31,671 - backend.api.voices - INFO - üìÅ Voice WAV: data\voices\702de09d-3da9-4f47-8fde-73a42fdd0457.wav
2025-12-16 15:49:31,672 - backend.api.voices - INFO - üìÅ Voice JSON: data\voices\702de09d-3da9-4f47-8fde-73a42fdd0457.json
2025-12-16 15:49:31,708 - backend.api.voices - INFO - ‚úÖ Voice profile already ready: data\voices\f15171b6-67a6-483f-aea0-5e86423648cc.json
2025-12-16 15:49:31,711 - backend.api.voices - INFO - üìä Voice WAV file: 92078 bytes
2025-12-16 15:49:31,716 - backend.api.voices - INFO - üìä Voice profile metadata: Coqui XTTS v2 voice profile - works with short audio samples (5+ seconds)      
2025-12-16 15:49:31,718 - backend.api.voices - INFO - ‚úÖ Speaker WAV verified: C:\Users\Jeferson\Documents\orbis\data\voices\702de09d-3da9-4f47-8fde-73a42fdd0457.wav
2025-12-16 15:49:31,719 - backend.api.voices - WARNING - ‚ö†Ô∏è Redis cache warning: No module named 'backend.core.redis'
INFO:     45.178.146.74:0 - "POST /api/voices/preload HTTP/1.1" 200 OK
INFO:     45.178.146.74:0 - "OPTIONS /api/rooms/342b5c34-f807-4a35-82ed-fd7bdb6d574c/join HTTP/1.1" 200 OK
2025-12-16 15:49:35,078 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:49:35,078 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:49:35,078 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:49:35,078 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: 702de09d-3da9-4f47-8fde-73a42fdd0457, type: access, exp: 1766080059
2025-12-16 15:49:35,167 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices6@gmail.com
INFO:     45.178.146.74:0 - "POST /api/rooms/342b5c34-f807-4a35-82ed-fd7bdb6d574c/join HTTP/1.1" 200 OK
INFO:     45.178.146.74:0 - "OPTIONS /api/chat/messages/342b5c34-f807-4a35-82ed-fd7bdb6d574c?limit=100 HTTP/1.1" 200 OK
2025-12-16 15:49:35,985 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:49:35,985 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:49:35,986 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:49:35,986 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: 702de09d-3da9-4f47-8fde-73a42fdd0457, type: access, exp: 1766080059
INFO:     45.178.146.74:0 - "OPTIONS /api/profile/me HTTP/1.1" 200 OK
INFO:     45.178.146.74:0 - "OPTIONS /api/rooms/342b5c34-f807-4a35-82ed-fd7bdb6d574c HTTP/1.1" 200 OK
2025-12-16 15:49:36,059 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
INFO:     ('45.178.146.74', 0) - "WebSocket /api/chat/ws/342b5c34-f807-4a35-82ed-fd7bdb6d574c" [accepted]
2025-12-16 15:49:36,060 - backend.api.chat - INFO - Client connected to room 342b5c34-f807-4a35-82ed-fd7bdb6d574c. Total: 2
2025-12-16 15:49:36,060 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:49:36,061 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
INFO:     connection open
2025-12-16 15:49:36,061 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: 702de09d-3da9-4f47-8fde-73a42fdd0457, type: access, exp: 1766080059
2025-12-16 15:49:36,074 - backend.api.deps - INFO - ‚úÖ get_current_active_user - user: jefersonservices6@gmail.com
2025-12-16 15:49:36,095 - backend.api.deps - INFO - üîë get_current_user called - has credentials: True
2025-12-16 15:49:36,095 - backend.api.deps - INFO - üé´ Token length: 187
2025-12-16 15:49:36,095 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:49:36,095 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: 702de09d-3da9-4f47-8fde-73a42fdd0457, type: access, exp: 1766080059
INFO:     45.178.146.74:0 - "GET /api/voices/profile HTTP/1.1" 200 OK
INFO:     45.178.146.74:0 - "GET /api/profile/me HTTP/1.1" 200 OK
INFO:     45.178.146.74:0 - "GET /api/chat/messages/342b5c34-f807-4a35-82ed-fd7bdb6d574c?limit=100 HTTP/1.1" 200 OK
2025-12-16 15:49:36,429 - backend.api.websocket - INFO - üîå WebSocket connection attempt to room: 342b5c34-f807-4a35-82ed-fd7bdb6d574c
2025-12-16 15:49:36,429 - backend.api.websocket - INFO - Query params: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI3MDJkZTA5ZC0zZGE5LTRmNDctOGZkZS03M2E0MmZkZDA0NTciLCJleHAiOjE3NjYwODAwNTksInR5cGUiOiJhY2Nlc3MifQ.Z-w_IlIlbXKggCuNoJY-IDZ4ajsw9unSvpVFzqVl_A8
2025-12-16 15:49:36,429 - backend.api.websocket - INFO - Headers: {'host': 'convolutionary-staminal-caren.ngrok-free.dev', 'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Mobile Safari/537.36', 'accept-encoding': 'gzip, deflate, br, zstd', 'accept-language': 'en-US,en;q=0.6', 'cache-control': 'no-cache', 'connection': 'Upgrade', 'origin': 'https://orbis-omega.vercel.app', 'pragma': 'no-cache', 'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits', 'sec-websocket-key': 'A6U0Wqfse0nfHFtK2Ryh8Q==', 'sec-websocket-version': '13', 'upgrade': 'websocket', 'x-forwarded-for': '45.178.146.74', 'x-forwarded-host': 'convolutionary-staminal-caren.ngrok-free.dev', 'x-forwarded-proto': 'https'}
2025-12-16 15:49:36,429 - backend.api.websocket - INFO - Origin: https://orbis-omega.vercel.app
2025-12-16 15:49:36,429 - backend.api.websocket - INFO - üìç WebSocket connection from origin: https://orbis-omega.vercel.app
INFO:     ('45.178.146.74', 0) - "WebSocket /api/ws/audio/342b5c34-f807-4a35-82ed-fd7bdb6d574c?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI3MDJkZTA5ZC0zZGE5LTRmNDctOGZkZS03M2E0MmZkZDA0NTciLCJleHAiOjE3NjYwODAwNTksInR5cGUiOiJhY2Nlc3MifQ.Z-w_IlIlbXKggCuNoJY-IDZ4ajsw9unSvpVFzqVl_A8" [accepted]
2025-12-16 15:49:36,429 - backend.api.websocket - INFO - ‚úÖ WebSocket connection accepted
2025-12-16 15:49:36,429 - backend.api.websocket - INFO - üîê Attempting to authenticate WebSocket user...
2025-12-16 15:49:36,429 - backend.api.deps - INFO - üîë Token from query params: Present
2025-12-16 15:49:36,429 - backend.api.deps - INFO - üîì Decoding token (length: 187)
2025-12-16 15:49:36,429 - backend.core.security - INFO - üîì Attempting to decode token (length: 187)
2025-12-16 15:49:36,429 - backend.core.security - INFO - ‚úÖ Token decoded successfully - sub: 702de09d-3da9-4f47-8fde-73a42fdd0457, type: access, exp: 1766080059
2025-12-16 15:49:36,429 - backend.api.deps - INFO - ‚úÖ Token decoded successfully: {'sub': '702de09d-3da9-4f47-8fde-73a42fdd0457', 'exp': 1766080059, 'type': 'access'}
2025-12-16 15:49:36,429 - backend.api.deps - INFO - üë§ User ID from token: 702de09d-3da9-4f47-8fde-73a42fdd0457
2025-12-16 15:49:36,429 - backend.api.deps - INFO - ‚úÖ Converted user_id to UUID: 702de09d-3da9-4f47-8fde-73a42fdd0457
2025-12-16 15:49:36,526 - backend.api.deps - INFO - ‚úÖ User found in database: jefersonservices6@gmail.com
2025-12-16 15:49:36,558 - backend.api.websocket - INFO - ‚úÖ User authenticated: 702de09d-3da9-4f47-8fde-73a42fdd0457
2025-12-16 15:49:36,558 - backend.api.websocket - INFO - User 702de09d-3da9-4f47-8fde-73a42fdd0457 connected to room 342b5c34-f807-4a35-82ed-fd7bdb6d574c
INFO:     45.178.146.74:0 - "GET /api/rooms/342b5c34-f807-4a35-82ed-fd7bdb6d574c HTTP/1.1" 200 OK
INFO:     connection open
2025-12-16 15:49:36,868 - backend.api.websocket - INFO - üåê Loaded user languages from DB: speaks=pt (['pt']), wants_to_hear=pt (['pt'])
2025-12-16 15:49:36,896 - backend.services.audio_pipeline.stream_processor - INFO - Started audio processing for user 702de09d-3da9-4f47-8fde-73a42fdd0457 (pt‚Üípt)
2025-12-16 15:49:36,896 - backend.services.audio_pipeline.stream_processor - INFO - üîÑ Updated languages for user 702de09d-3da9-4f47-8fde-73a42fdd0457: speaks=pt, wants_to_hear=pt
2025-12-16 15:49:36,896 - backend.api.websocket - INFO - ‚úÖ Initial language settings for user 702de09d-3da9-4f47-8fde-73a42fdd0457: speaks=pt, wants_to_hear=pt
2025-12-16 15:49:36,901 - backend.api.websocket - INFO - Forwarded WebRTC offer from e10438f8-4759-4467-95f4-a12d7c15ae6d to 702de09d-3da9-4f47-8fde-73a42fdd0457
2025-12-16 15:49:38,090 - backend.api.websocket - INFO - Forwarded WebRTC answer from 702de09d-3da9-4f47-8fde-73a42fdd0457 to e10438f8-4759-4467-95f4-a12d7c15ae6d
2025-12-16 15:49:49,155 - backend.services.audio_pipeline.stream_processor - INFO - Started audio processing for user 702de09d-3da9-4f47-8fde-73a42fdd0457 (auto‚Üíen)
2025-12-16 15:49:51,773 - ml.asr.whisper_service - INFO - üîç Whisper detected language: en (confidence: 54.40%)
2025-12-16 15:49:51,782 - ml.asr.whisper_service - INFO - ‚úÖ Transcribed [1275ms]: '...' (lang: en)
2025-12-16 15:49:54,623 - ml.asr.whisper_service - INFO - üîç Whisper detected language: en (confidence: 54.40%)
2025-12-16 15:49:54,623 - ml.asr.whisper_service - WARNING - ‚ö†Ô∏è Empty transcription for 2.41s of audio. Detected lang: en, segments: 0
2025-12-16 15:49:54,623 - ml.asr.whisper_service - INFO - ‚úÖ Transcribed [691ms]: '...' (lang: en)
2025-12-16 15:49:55,393 - ml.asr.whisper_service - INFO - üîç Whisper detected language: it (confidence: 15.30%)
2025-12-16 15:49:56,119 - ml.asr.whisper_service - INFO - ‚úÖ Transcribed [1393ms]: 'con il ci√≤ che....' (lang: it)
2025-12-16 15:49:56,119 - backend.services.audio_pipeline.stream_processor - INFO - üß≠ Language decision | configured_input=auto detected=it conf=0.15 ‚Üí chosen=en
2025-12-16 15:49:56,119 - backend.services.audio_pipeline.stream_processor - INFO - üé§ User 702de09d-3da9-4f47-8fde-73a42fdd0457 spoke in en: 'con il ci√≤ che.' 
2025-12-16 15:49:56,123 - backend.services.audio_pipeline.stream_processor - INFO - üîä Found 2 listeners in room 342b5c34-f807-4a35-82ed-fd7bdb6d574c: [UUID('e10438f8-4759-4467-95f4-a12d7c15ae6d'), UUID('702de09d-3da9-4f47-8fde-73a42fdd0457')]
2025-12-16 15:49:56,124 - backend.services.audio_pipeline.stream_processor - INFO - üåê Translated to en: 'con il ci√≤ che.'
2025-12-16 15:49:56,246 - backend.services.audio_pipeline.stream_processor - INFO - ‚úÖ Using cloned voice for user 702de09d-3da9-4f47-8fde-73a42fdd0457: C:\Users\Jeferson\Documents\orbis\data\voices\702de09d-3da9-4f47-8fde-73a42fdd0457.wav
2025-12-16 15:49:56,246 - ml.tts.coqui_service - INFO - Synthesizing with cloned voice from: C:\Users\Jeferson\Documents\orbis\data\voices\702de09d-3da9-4f47-8fde-73a42fdd0457.wav
 > Text splitted to sentences.
['con il ci√≤ che.']